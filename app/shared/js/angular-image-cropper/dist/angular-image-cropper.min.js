!function (t, e) { "object" == typeof exports && "object" == typeof module?module.exports = e(require("angular")):"function" == typeof define && define.amd?define(["angular"], e):"object" == typeof exports?exports.imageCropper = e(require("angular")):t.imageCropper = e(t.angular) }(this, function (__WEBPACK_EXTERNAL_MODULE_1__) { return function (t) { function e(n) { if (i[n]) return i[n].exports; var o = i[n] = { exports: {}, id: n, loaded: !1 }; return t[n].call(o.exports, o, o.exports, e), o.loaded = !0, o.exports } var i = {}; return e.m = t, e.c = i, e.p = "", e(0) }([function (t, e, i) { var n = i(1), o = (n.module("imageCropper", []), i(2)); i(3)(n, o), t.exports = "imageCropper" }, function (t, e) { t.exports = __WEBPACK_EXTERNAL_MODULE_1__ }, function (t, e) { function i(t) { if (!t.imageUrl) throw new Error("Cropper: No image url given."); this.isReady = !1, this.originalUrl = t.imageUrl; var e = { checkCrossOrigin: !1, apiCallback: void 0, cropCallback: void 0, width: 400, height: 300, imageUrl: void 0, target: void 0, showControls: !0, fitOnInit: !1, centerOnInit: !1, zoomStep: .01, actionLabels: { rotateLeft: " < ", rotateRight: " > ", zoomIn: " + ", zoomOut: " - ", fit: "(fit)", crop: "[crop]" } }; this.options = this.extend(e, t), this.gesture = {}, this.gesture.events = { start: "touchstart mousedown", move: "touchmove mousemove", stop: "touchend mouseup" }, this.pointerPosition = void 0, this.elements = { target: t.target, body: document.getElementsByTagName("body")[0] }, this.buildDOM(), this.useHardwareAccelerate(this.elements.image); var i = { crop: this.cropImage.bind(this), fit: this.applyFit.bind(this), rotate: this.applyRotation.bind(this), zoomIn: this.applyZoomIn.bind(this), zoomOut: this.applyZoomOut.bind(this), remove: this.remove.bind(this) }; this.events.on("ImageReady", this.initialize.bind(this)), this.options.cropCallback && this.events.on("Cropped", function (t) { this.options.cropCallback(t) }.bind(this)), this.options.apiCallback && this.events.on("ImageReady", function () { this.options.apiCallback(i) }.bind(this)) } t.exports = i, i.prototype.initialize = function () { this.setDimensions(), this.imageHasToFit() && (this.fitImage(), this.centerImage()), this.initializeGesture(), this.options.centerOnInit && this.centerImage(), this.options.showControls && this.bindControls() }, i.prototype.bindControls = function () { var t = this; this.elements.controls.rotateLeft.addEventListener("click", function () { t.applyRotation(-90) }), this.elements.controls.rotateRight.addEventListener("click", function () { t.applyRotation(90) }), this.elements.controls.zoomIn.addEventListener("click", function () { t.applyZoomIn(t.zoomInFactor) }), this.elements.controls.zoomOut.addEventListener("click", function () { t.applyZoomOut(t.zoomOutFactor) }), this.elements.controls.fit.addEventListener("click", this.applyFit.bind(this)), this.elements.controls.crop.addEventListener("click", this.cropImage.bind(this)) }, i.prototype.applyRotation = function (t) { this.rotateImage(t) }, i.prototype.applyZoomIn = function (t) { this.zoomImage(1 + parseFloat(t)) }, i.prototype.applyZoomOut = function (t) { this.zoomImage(1 / (1 + parseFloat(t))) }, i.prototype.applyFit = function () { this.fitImage(), this.centerImage() }, i.prototype.imageHasToFit = function () { return this.elements.image.naturalWidth < this.options.width || this.elements.image.naturalHeight < this.options.height || this.width < 1 || this.height < 1 || this.options.fitOnInit }, i.prototype.buildDOM = function () { var t; return t = this.elements, t.wrapper = document.createElement("div"), t.wrapper.className = "imgCropper-wrapper", t.container = document.createElement("div"), t.container.className = "imgCropper-container", t.image = document.createElement("img"), t.image.className = "imgCropper-image", t.container.appendChild(t.image), t.wrapper.appendChild(t.container), t.target.appendChild(t.wrapper), this.options.showControls?(t.controls = {}, t.controls.wrapper = document.createElement("div"), t.controls.wrapper.className = "imgCropper-controls", t.controls.rotateLeft = this._buildControl(this.options.actionLabels.rotateLeft), t.controls.rotateRight = this._buildControl(this.options.actionLabels.rotateRight), t.controls.zoomIn = this._buildControl(this.options.actionLabels.zoomIn), t.controls.zoomOut = this._buildControl(this.options.actionLabels.zoomOut), t.controls.fit = this._buildControl(this.options.actionLabels.fit), t.controls.crop = this._buildControl(this.options.actionLabels.crop), t.controls.wrapper.appendChild(t.controls.rotateLeft), t.controls.wrapper.appendChild(t.controls.zoomOut), t.controls.wrapper.appendChild(t.controls.fit), t.controls.wrapper.appendChild(t.controls.crop), t.controls.wrapper.appendChild(t.controls.zoomIn), t.controls.wrapper.appendChild(t.controls.rotateRight), t.target.appendChild(t.controls.wrapper), void this.loadImage()):this.loadImage() }, i.prototype._buildControl = function (t) { var e = document.createElement("button"); return e.setAttribute("type", "button"), e.innerHTML = t, e }, i.prototype.remove = function () { var t = this.elements; t.target.removeChild(t.wrapper), this.options.showControls && t.target.removeChild(t.controls.wrapper) }, i.prototype.loadImage = function () { var t, e = this; return /^data\:/.test(this.originalUrl)?(this.originalBase64 = this.originalUrl, this.setupImageSRC()):(t = new XMLHttpRequest, t.onerror = t.onabort = function (t) { e.originalBase64 = e.originalUrl, e.setupImageSRC() }, t.onload = function () { e.originalArrayBuffer = this.response, e.originalBase64 = "data:image/jpeg;base64," + e.base64ArrayBuffer(this.response), e.setupImageSRC() }, t.open("get", this.originalUrl, !0), t.responseType = "arraybuffer", void t.send()) }, i.prototype.setupImageSRC = function () { var t = this.elements.image; this.options.checkCrossOrigin && this.isCrossOrigin(this.originalUrl) && (this.crossOrigin = t.crossOrigin, this.crossOrigin?this.crossOrigin = this.originalUrl:(this.crossOrigin = "anonymous", this.crossOriginUrl = this.addTimestamp(this.originalUrl))), this.crossOrigin && (this.elements.image.crossOrigin = this.crossOrigin), this.elements.image.src = this.crossOriginUrl || this.originalUrl, this.elements.image.onload = function () { this.events.triggerHandler("ImageReady") }.bind(this) }, i.prototype.setDimensions = function () { this.zoomInFactor = 1 + parseFloat(this.options.zoomStep), this.zoomOutFactor = 1 / this.zoomInFactor, this.imageRatio = this.options.height / this.options.width, this.width = this.elements.image.naturalWidth / this.options.width, this.height = this.elements.image.naturalHeight / this.options.height, this.left = 0, this.top = 0, this.angle = 0, this.data = { scale: 1, degrees: 0, x: 0, y: 0, w: this.options.width, h: this.options.height }, this.elements.container.style.width = 100 * this.width + "%", this.elements.container.style.height = 100 * this.height + "%", this.elements.container.style.top = 0, this.elements.container.style.left = 0, this.elements.wrapper.style.height = "auto", this.elements.wrapper.style.width = "100%", this.elements.wrapper.style.paddingTop = 100 * this.imageRatio + "%", this.isReady = !0 }, i.prototype.initializeGesture = function () { var t = this; this.addEventListeners(this.elements.image, this.gesture.events.start, function (i) { t.isReady && t.isValidEvent(i) && (i.preventDefault(), i.stopImmediatePropagation(), t.pointerPosition = t.getPointerPosition(i), e()) }); var e = function () { t.elements.body.classList.add("imgCropper-dragging"), t.addEventListeners(t.elements.body, t.gesture.events.move, n), t.addEventListeners(t.elements.body, t.gesture.events.stop, i) }, i = function () { t.elements.body.classList.remove("imgCropper-dragging"), t.removeEventListeners(t.elements.body, t.gesture.events.move, n), t.removeEventListeners(t.elements.body, t.gesture.events.stop, i) }, n = function (e) { t.dragging.call(t, e) } }, i.prototype.dragging = function (t) { var e, i, n, o, s; t.preventDefault(), t.stopImmediatePropagation(), o = this.getPointerPosition(t), e = o.x - this.pointerPosition.x, i = o.y - this.pointerPosition.y, this.pointerPosition = o, n = 0 === e?null:this.left - e / this.elements.wrapper.clientWidth, s = 0 === i?null:this.top - i / this.elements.wrapper.clientHeight, this.setOffset(n, s) }, i.prototype.setOffset = function (t, e) { (t || 0 === t) && (0 > t && (t = 0), t > this.width - 1 && (t = this.width - 1), this.elements.container.style.left = (100 * -t).toFixed(2) + "%", this.left = t, this.data.x = Math.round(t * this.options.width)), (e || 0 === e) && (0 > e && (e = 0), e > this.height - 1 && (e = this.height - 1), this.elements.container.style.top = (100 * -e).toFixed(2) + "%", this.top = e, this.data.y = Math.round(e * this.options.height)) }, i.prototype.fitImage = function () { var t, e; t = this.width, e = this.height / this.width, e > 1?(this.width = 1, this.height = e):(this.width = 1 / e, this.height = 1), this.elements.container.style.width = (100 * this.width).toFixed(2) + "%", this.elements.container.style.height = (100 * this.height).toFixed(2) + "%", this.data.scale *= this.width / t }, i.prototype.centerImage = function () { this.setOffset((this.width - 1) / 2, (this.height - 1) / 2) }, i.prototype.rotateImage = function (t) { if (0 === t || t % 90 !== 0) throw new Error("Cropper: Support only multiple of 90° for rotation."); if (this.angle = (this.angle + t) % 360, this.angle < 0 && (this.angle += 360), t % 180 !== 0) { var e = this.height * this.imageRatio, i = this.width / this.imageRatio; this.width = e, this.height = i, this.width >= 1 && this.height >= 1?(this.elements.container.style.width = 100 * this.width + "%", this.elements.container.style.height = 100 * this.height + "%"):this.fitImage() } var n = 1, o = 1; if (this.angle % 180 !== 0) { var s = this.height / this.width * this.imageRatio; n = s, o = 1 / s } this.elements.image.style.width = 100 * n + "%", this.elements.image.style.height = 100 * o + "%", this.elements.image.style.left = (1 - n) / 2 * 100 + "%", this.elements.image.style.top = (1 - o) / 2 * 100 + "%", this.elements.image.style.transform = "rotate(" + this.angle + "deg)", this.elements.image.style.webkitTransform = "rotate(" + this.angle + "deg)", this.elements.image.style.mozTransform = "rotate(" + this.angle + "deg)", this.elements.image.style.msTransform = "rotate(" + this.angle + "deg)", this.elements.image.style.oTransform = "rotate(" + this.angle + "deg)", this.centerImage(), this.data.degrees = this.angle }, i.prototype.zoomImage = function (t) { if (!(0 >= t || 1 == t)) { var e = this.width; this.width * t > 1 && this.height * t > 1?(this.height *= t, this.width *= t, this.elements.container.style.height = (100 * this.height).toFixed(2) + "%", this.elements.container.style.width = (100 * this.width).toFixed(2) + "%", this.data.scale *= t):(this.fitImage(), t = this.width / e); var i = (this.left + .5) * t - .5, n = (this.top + .5) * t - .5; this.setOffset(i, n) } }, i.prototype.cropImage = function () { return this.cropHandler() }, i.prototype.cropHandler = function () { var t, e; t = document.createElement("canvas"), t.height = this.options.height, t.width = this.options.width; var i = -t.width / 2, n = -t.height / 2; e = t.getContext("2d"), e.translate(-i, -n), e.rotate(this.data.degrees * Math.PI / 180), e.scale(this.data.scale, this.data.scale), 0 == this.data.degrees?e.drawImage(this.elements.image, (i - this.data.x) / this.data.scale, (n - this.data.y) / this.data.scale):90 == this.data.degrees?e.drawImage(this.elements.image, (n - this.data.y) / this.data.scale, -1 * this.elements.image.naturalHeight + (-i + this.data.x) / this.data.scale):180 == this.data.degrees?e.drawImage(this.elements.image, -1 * this.elements.image.naturalWidth + (-i + this.data.x) / this.data.scale, -1 * this.elements.image.naturalHeight + (-n + this.data.y) / this.data.scale):270 == this.data.degrees && e.drawImage(this.elements.image, -1 * this.elements.image.naturalWidth + (-n + this.data.y) / this.data.scale, (i - this.data.x) / this.data.scale); var o = t.toDataURL("image/jpeg"); return this.events.triggerHandler("Cropped", o), o }, i.prototype.useHardwareAccelerate = function (t) { t.style.perspective = "1000px", t.style.backfaceVisibility = "hidden" }, i.prototype.extend = function (t, e) { var i = t, n = Object.keys(t); return n.forEach(function (t, n, o) { void 0 !== e[t] && (i[t] = e[t]) }), i }, i.prototype.addEventListeners = function (t, e, i, n) { e.split(" ").forEach(function (e) { n?t.addEventListener(e, i.bind(n), !1):t.addEventListener(e, i, !1) }) }, i.prototype.removeEventListeners = function (t, e, i, n) { e.split(" ").forEach(function (e) { n?t.removeEventListener(e, i.bind(n), !1):t.removeEventListener(e, i, !1) }) }, i.prototype.getPointerPosition = function (t) { return this.isTouchEvent(t) && (t = t.touches[0]), { x: t.pageX, y: t.pageY } }, i.prototype.isValidEvent = function (t) { return this.isTouchEvent(t)?1 === t.changedTouches.length:1 === t.which }, i.prototype.isTouchEvent = function (t) { return /touch/i.test(t.type) }, i.prototype.addTimestamp = function (t) { var e = "timestamp=" + (new Date).getTime(), i = "?"; return -1 !== t.indexOf("?") && (i = "&"), t.concat(i, e) }, i.prototype.isCrossOrigin = function (t) { var e = t.match(); return Boolean(e && (e[1] !== location.protocol || e[2] !== location.hostname || e[3] !== location.port)) }, i.prototype.base64ArrayBuffer = function (t) { for (var e, i, n, o, s, r = "", a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", h = new Uint8Array(t), l = h.byteLength, p = l % 3, c = l - p, d = 0; c > d; d += 3) s = h[d] << 16 | h[d + 1] << 8 | h[d + 2], e = (16515072 & s) >> 18, i = (258048 & s) >> 12, n = (4032 & s) >> 6, o = 63 & s, r += a[e] + a[i] + a[n] + a[o]; return 1 == p?(s = h[c], e = (252 & s) >> 2, i = (3 & s) << 4, r += a[e] + a[i] + "=="):2 == p && (s = h[c] << 8 | h[c + 1], e = (64512 & s) >> 10, i = (1008 & s) >> 4, n = (15 & s) << 2, r += a[e] + a[i] + a[n] + "="), r }, i.prototype.events = new function () { var t = {}; this.on = function (e, i) { t[e] || (t[e] = []), t[e].push(i) }, this.triggerHandler = function (e, i) { if (t[e]) for (var n in t[e]) t[e][n](i) } } }, function (module, exports, __webpack_require__) { module.exports = function (angular, Cropper) { __webpack_require__(4), angular.module("imageCropper").directive("imageCropper", function () { return { restrict: "E", scope: { centerOnInit: "@", checkCrossOrigin: "@", cropCallback: "&", api: "&", fitOnInit: "@", height: "@", imageUrl: "@", showControls: "@", width: "@", zoomStep: "@", actionLabels: "&" }, bindToController: !0, controllerAs: "vm", controller: function () { var self = this; this.actionLabels = this.actionLabels(), this.apiCallback = this.api(), this.cropCallback = this.cropCallback(), this.fitOnInit = eval(this.fitOnInit), this.centerOnInit = eval(this.centerOnInit), this.checkCrossOrigin = eval(this.checkCrossOrigin), this.showControls = eval(this.showControls), this.init = function () { this.target = this.element, this.api = new Cropper(self) } }, link: function (t, e, i, n) { n.element = e[0], n.init() } } }) } }, function (t, e, i) { var n = i(5); "string" == typeof n && (n = [[t.id, n, ""]]); i(7)(n, {}); n.locals && (t.exports = n.locals) }, function (t, e, i) { e = t.exports = i(6)(), e.push([t.id, "body.imgCropper-dragging, body.imgCropper-dragging * {\n  cursor: move !important;\n  cursor: -webkit-grabbing !important;\n  cursor: -moz-grabbing !important;\n  cursor: grabbing !important;\n  cursor: grabbing, move;\n  /* IE hack */ }\n\n.imgCropper-wrapper {\n  display: block;\n  position: relative;\n  overflow: hidden;\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n  cursor: grab, move;\n  /* IE hack */ }\n\n.imgCropper-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  text-align: center;\n  margin: 0 !important;\n  padding: 0 !important;\n  border: none !important; }\n\n.imgCropper-container > * {\n  position: absolute;\n  top: 0;\n  left: 0;\n  max-width: none;\n  max-height: none;\n  width: 100%;\n  height: 100%;\n  margin: 0 !important;\n  padding: 0 !important;\n  border: none !important; }\n\n.imgCropper-sample {\n  position: absolute !important;\n  top: -100000px     !important;\n  left: -100000px    !important;\n  width: auto        !important;\n  height: auto       !important; }\n", ""]) }, function (t, e) { t.exports = function () { var t = []; return t.toString = function () { for (var t = [], e = 0; e < this.length; e++) { var i = this[e]; i[2]?t.push("@media " + i[2] + "{" + i[1] + "}"):t.push(i[1]) } return t.join("") }, t.i = function (e, i) { "string" == typeof e && (e = [[null, e, ""]]); for (var n = {}, o = 0; o < this.length; o++) { var s = this[o][0]; "number" == typeof s && (n[s] = !0) } for (o = 0; o < e.length; o++) { var r = e[o]; "number" == typeof r[0] && n[r[0]] || (i && !r[2]?r[2] = i:i && (r[2] = "(" + r[2] + ") and (" + i + ")"), t.push(r)) } }, t } }, function (t, e, i) { function n(t, e) { for (var i = 0; i < t.length; i++) { var n = t[i], o = m[n.id]; if (o) { o.refs++; for (var s = 0; s < o.parts.length; s++) o.parts[s](n.parts[s]); for (; s < n.parts.length; s++) o.parts.push(l(n.parts[s], e)) } else { for (var r = [], s = 0; s < n.parts.length; s++) r.push(l(n.parts[s], e)); m[n.id] = { id: n.id, refs: 1, parts: r } } } } function o(t) { for (var e = [], i = {}, n = 0; n < t.length; n++) { var o = t[n], s = o[0], r = o[1], a = o[2], h = o[3], l = { css: r, media: a, sourceMap: h }; i[s]?i[s].parts.push(l):e.push(i[s] = { id: s, parts: [l] }) } return e } function s(t, e) { var i = f(), n = b[b.length - 1]; if ("top" === t.insertAt) n?n.nextSibling?i.insertBefore(e, n.nextSibling):i.appendChild(e):i.insertBefore(e, i.firstChild), b.push(e); else { if ("bottom" !== t.insertAt) throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'."); i.appendChild(e) } } function r(t) { t.parentNode.removeChild(t); var e = b.indexOf(t); e >= 0 && b.splice(e, 1) } function a(t) { var e = document.createElement("style"); return e.type = "text/css", s(t, e), e } function h(t) { var e = document.createElement("link"); return e.rel = "stylesheet", s(t, e), e } function l(t, e) { var i, n, o; if (e.singleton) { var s = y++; i = v || (v = a(e)), n = p.bind(null, i, s, !1), o = p.bind(null, i, s, !0) } else t.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa?(i = h(e), n = d.bind(null, i), o = function () { r(i), i.href && URL.revokeObjectURL(i.href) }):(i = a(e), n = c.bind(null, i), o = function () { r(i) }); return n(t), function (e) { if (e) { if (e.css === t.css && e.media === t.media && e.sourceMap === t.sourceMap) return; n(t = e) } else o() } } function p(t, e, i, n) { var o = i?"":n.css; if (t.styleSheet) t.styleSheet.cssText = w(e, o); else { var s = document.createTextNode(o), r = t.childNodes; r[e] && t.removeChild(r[e]), r.length?t.insertBefore(s, r[e]):t.appendChild(s) } } function c(t, e) { var i = e.css, n = e.media; e.sourceMap; if (n && t.setAttribute("media", n), t.styleSheet) t.styleSheet.cssText = i; else { for (; t.firstChild;) t.removeChild(t.firstChild); t.appendChild(document.createTextNode(i)) } } function d(t, e) { var i = e.css, n = (e.media, e.sourceMap); n && (i += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n)))) + " */"); var o = new Blob([i], { type: "text/css" }), s = t.href; t.href = URL.createObjectURL(o), s && URL.revokeObjectURL(s) } var m = {}, g = function (t) { var e; return function () { return "undefined" == typeof e && (e = t.apply(this, arguments)), e } }, u = g(function () { return /msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase()) }), f = g(function () { return document.head || document.getElementsByTagName("head")[0] }), v = null, y = 0, b = []; t.exports = function (t, e) { e = e || {}, "undefined" == typeof e.singleton && (e.singleton = u()), "undefined" == typeof e.insertAt && (e.insertAt = "bottom"); var i = o(t); return n(i, e), function (t) { for (var s = [], r = 0; r < i.length; r++) { var a = i[r], h = m[a.id]; h.refs--, s.push(h) } if (t) { var l = o(t); n(l, e) } for (var r = 0; r < s.length; r++) { var h = s[r]; if (0 === h.refs) { for (var p = 0; p < h.parts.length; p++) h.parts[p](); delete m[h.id] } } } }; var w = function () { var t = []; return function (e, i) { return t[e] = i, t.filter(Boolean).join("\n") } }() }]) });